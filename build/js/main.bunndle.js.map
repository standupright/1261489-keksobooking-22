<<<<<<< HEAD
{"version":3,"sources":["webpack://keksobooking/./source/js/images-preview.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/webpack/runtime/define property getters","webpack://keksobooking/webpack/runtime/hasOwnProperty shorthand","webpack://keksobooking/./source/js/create-similar-advertisements.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/main.js","webpack://keksobooking/./source/js/api.js"],"names":["FILE_TYPES","avatarChooser","document","querySelector","picPreview","imagesChooser","imagesPreview","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","style","backgroundImage","backgroundSize","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","cardTemplate","createSimilarAdvertisements","similarAdvertisements","valueType","valuePrice","valueRooms","valueGuests","valuesFeature","filteredAdvertisements","popups","similarListFragment","createDocumentFragment","slice","filter","advertisementsElement","value","offer","type","sortByType","price","sortByPrice","rooms","sortByRooms","guests","sortByGuests","features","length","accumulator","i","j","sortByFeatures","push","forEach","author","advertisement","cloneNode","content","title","address","capacity","textTime","description","photos","avatar","completeTextContentInPopup","popupElement","advertisementElement","classList","add","textContent","TYPE_NAMES","keys","undefined","checkin","checkout","firstChild","removeChild","nameChild","nameParent","element","createElement","appendChild","createElementInList","index","width","height","createImg","children","removeMarkers","renderAdvertisementsOnMap","alertSuccessTemplate","alertErrorTemplate","main","showMessageErrorAlert","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","body","append","setTimeout","remove","onAlertKeydown","container","evt","isEscEvent","preventDefault","closeAlert","onWindowsClick","removeEventListener","showAlertError","alertEror","TYPE_PRICES","filtersMap","mapFeautures","mapFilters","querySelectorAll","housingType","housingPrice","housingRooms","housingGuests","mapCheckboxes","informForm","timein","timeout","roomNumber","featureCheckboxes","informFieldsets","resetButton","formPhoto","deactivateForm","disabled","activateForm","setAttribute","minPrice","this","min","placeholder","onTimeChange","changeOut","validity","valueMissing","setCustomValidity","valueLength","reportValidity","rangeOverflow","rangeUnderflow","resetForm","checked","mainPinMarker","setLatLng","lat","lng","renderAdvertisements","map","L","on","setView","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","marker","draggable","markerName","pinCords","getLatLng","toFixed","setAddress","target","choosedAdvertisement","counter","regularIcon","regularMarkers","advertisements","regularPinMarker","location","bindPopup","renderedAdvertisements","keepInView","removeLayer","onSuccess","fetch","then","response","json","advrts","activateFilters","cb","checkFeatures","featuresValues","filterAdvertisements","_","debounce","catch","error","getData","formData","FormData","method","ok","alertSuccess","showAlertSuccess"],"mappings":"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","file":"main.bunndle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst avatarChooser = document.querySelector('#avatar');\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\n\nconst imagesChooser = document.querySelector('#images');\nconst imagesPreview = document.querySelector('.ad-form__photo');\n\navatarChooser.addEventListener('change', () => {\n  const file = avatarChooser.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      picPreview.src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n\nimagesChooser.addEventListener('change', () => {\n  const file = imagesChooser.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      imagesPreview.style.backgroundImage = `url(${reader.result})`;\n      imagesPreview.style.backgroundSize =  '70px 70px';\n    });\n\n    reader.readAsDataURL(file);\n  }\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import {renderAdvertisementsOnMap,removeMarkers} from './main.js'\n\nconst cardTemplate = document.querySelector('#card');\n\n// Сортировка по типу жилья\nconst sortByType = (advertisementsElement, value) => {\n  return advertisementsElement.offer.type === value || value === 'any'\n}\n\n// Сортировка по цене\nconst sortByPrice = (advertisementsElement, value) => {\n  const price = advertisementsElement.offer.price;\n  switch (value) {\n    case 'any':\n      return true;\n    case 'middle':\n      return price >= 10000 && price < 50000;\n    case 'low':\n      return price <= 10000;\n    case 'high':\n      return price >= 50000;\n    default:\n      return true;\n  }\n}\n\n// Сортировка по числу комнат\nconst sortByRooms = (advertisementsElement, value) => {\n  const rooms = advertisementsElement.offer.rooms;\n  switch (value) {\n    case 'any':\n      return true;\n    case '1':\n      return rooms === 1;\n    case '2':\n      return rooms === 2;\n    case '3':\n      return rooms === 3;\n    default:\n      return true;\n  }\n}\n\n// Сортировка по количеству гостей\nconst sortByGuests = (advertisementsElement, value) => {\n  const guests = advertisementsElement.offer.guests;\n  switch (value) {\n    case 'any':\n      return true;\n    case '1':\n      return guests === 1;\n    case '2':\n      return guests === 2;\n    case '0':\n      return guests === 0;\n    default:\n      return false;\n  }\n}\n\n// Сортировка по доп удобствам\nconst sortByFeatures = (advertisementsElement, valuesFeature) => {\n  const features = advertisementsElement.offer.features;\n\n  if (valuesFeature.length === 0) {\n    return true;\n  } else {\n    let accumulator = 0;\n    for (let i = 0; i < valuesFeature.length; i++) {\n      for (let j = 0; j < features.length; j++) {\n        if (features[j]===valuesFeature[i]) {\n          accumulator++;\n        }\n      }\n    }\n    return accumulator === valuesFeature.length\n  }\n}\n\nconst createSimilarAdvertisements = (similarAdvertisements,valueType='any',valuePrice='any',valueRooms='any',valueGuests='any',valuesFeature=[]) => {\n  const filteredAdvertisements = [];\n  const popups = [];\n  const similarListFragment = document.createDocumentFragment();\n  similarAdvertisements\n    .slice()\n    .filter((advertisementsElement) => {\n      if (sortByType(advertisementsElement, valueType)\n      &&  sortByPrice(advertisementsElement, valuePrice)\n      && sortByRooms(advertisementsElement, valueRooms)\n      && sortByGuests(advertisementsElement, valueGuests)\n      && sortByFeatures(advertisementsElement, valuesFeature)) {\n        filteredAdvertisements.push(advertisementsElement);\n      }\n    })\n\n  filteredAdvertisements.forEach(({\n    author,\n    offer,\n  }) => {\n    const advertisement = cardTemplate.cloneNode(true).content;\n    const title = advertisement.querySelector('.popup__title');\n    const price = advertisement.querySelector('.popup__text--price');\n    const address = advertisement.querySelector('.popup__text--address');\n    const type = advertisement.querySelector('.popup__type');\n    const capacity = advertisement.querySelector('.popup__text--capacity');\n    const textTime = advertisement.querySelector('.popup__text--time');\n    const features = advertisement.querySelector('.popup__features');\n    const description = advertisement.querySelector('.popup__description');\n    const photos = advertisement.querySelector('.popup__photos');\n    const avatar = advertisement.querySelector('.popup__avatar');\n\n    const completeTextContentInPopup = (popupElement, advertisementElement) => {\n      advertisementElement === '' ? popupElement.classList.add('visually-hidden') : popupElement.textContent = advertisementElement;\n    }\n\n    completeTextContentInPopup(title,offer.title);\n    completeTextContentInPopup(price,offer.price);\n    completeTextContentInPopup(address,offer.address);\n    completeTextContentInPopup(description,offer.description);\n\n    author.avatar === '' ? avatar.classList.add('visually-hidden') : avatar.src = author.avatar;\n\n    const TYPE_NAMES = {\n      'flat': 'Квартира',\n      'bungalow': 'Бунгало',\n      'house': 'Дом',\n      'palace': 'Дворец',\n    };\n\n    const swapTypeName = () => {\n      Object.keys(TYPE_NAMES).forEach((value) => {\n        if (offer.type === value) {\n          type.textContent = TYPE_NAMES[`${value}`];\n        }\n      });\n    }\n\n    offer.type === '' ? avatar.classList.add('visually-hidden') : swapTypeName();\n\n    if (offer.rooms === undefined || offer.guests === undefined) {\n      capacity.classList.add('visually-hidden');\n    } else {\n      capacity.textContent = offer.rooms + ' комнаты для ' + offer.guests + ' гостей';\n    }\n\n    textTime.textContent = 'Заезд после ' + offer.checkin + ', выезд до ' + offer.checkout;\n\n    while (features.firstChild) {\n      features.removeChild(features.firstChild);\n    }\n\n    const createElementInList = (nameChild, nameParent) => {\n      const element = document.createElement('li');\n      element.classList.add('popup__feature');\n      element.classList.add('popup__feature--' + nameChild);\n      element.textContent = nameChild;\n      nameParent.appendChild(element);\n      return element;\n    };\n\n    if (offer.features.length === 0) {\n      features.classList.add('visually-hidden');\n    } else {\n      offer.features.forEach(value => {\n        createElementInList(value, features);\n      });\n    }\n\n    while (photos.firstChild) {\n      photos.removeChild(photos.firstChild);\n    }\n\n    const createImg = (nameParent) => {\n      const element = document.createElement('img');\n      element.classList.add('popup__photo');\n      element.width = '45';\n      element.height = '40';\n      nameParent.appendChild(element);\n      return element;\n    }\n\n    if (offer.photos.length === 0) {\n      photos.classList.add('visually-hidden');\n    } else {\n      offer.photos.forEach((value,index) => {\n        createImg(photos);\n        if (photos.children[index]){\n          photos.children[index].src = value;\n        }\n      });\n    }\n\n    similarListFragment.appendChild(advertisement);\n  });\n\n  for (let i = 0; i < similarListFragment.children.length; i++) {\n    popups[i] = similarListFragment.children[i];\n  }\n\n  removeMarkers()\n  renderAdvertisementsOnMap(filteredAdvertisements,popups);\n};\n\nexport {\n  createSimilarAdvertisements\n}\n","const alertSuccessTemplate = document.querySelector('#success');\nconst alertErrorTemplate = document.querySelector('#error');\nconst main = document.querySelector('main');\n\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nconst ALERT_SHOW_TIME = 5000;\n\nconst showMessageErrorAlert = () => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '20px 10px';\n  alertContainer.style.fontSize = '18px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'white';\n  alertContainer.style.width = 200;\n  alertContainer.style.height = 200;\n\n  alertContainer.textContent = 'Произошла ошибка при загрузке данных с сервера :( Обновите страницу!';\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove()\n  }, ALERT_SHOW_TIME);\n}\n\nconst onAlertKeydown = (container) => {\n  return (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      closeAlert(container);\n    }\n  }\n}\n\nconst onWindowsClick = (container) => {\n  return (evt) => {\n    evt.preventDefault();\n    closeAlert(container);\n  }\n}\n\nconst closeAlert = (container) => {\n  container.remove();\n  document.removeEventListener('keypress', onAlertKeydown(container))\n  container.removeEventListener('click', onWindowsClick(container));\n}\n\nconst showAlertSuccess = () => {\n  const alertSuccess = alertSuccessTemplate.cloneNode(true).content;\n  const alertContainer = document.createElement('div');\n  alertContainer.append(alertSuccess);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown(alertContainer));\n  alertContainer.addEventListener('click', onWindowsClick(alertContainer));\n}\n\nconst showAlertError = () => {\n  const alertEror = alertErrorTemplate.cloneNode(true).content;\n  const alertContainer = document.createElement('div');\n  alertContainer.append(alertEror);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown(alertContainer));\n  alertContainer.addEventListener('click', onWindowsClick(alertContainer));\n}\n\nexport {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError,\n  isEscEvent\n};\n","import {\n  sendData\n} from './api.js';\n\nimport {\n  mainPinMarker,\n  renderAdvertisements\n} from './main.js';\n\nconst TYPE_PRICES = {\n  'flat': 1000,\n  'bungalow': 0,\n  'house': 5000,\n  'palace': 10000,\n}\n\nconst MIN_NAME_LENGTH = 30;\nconst MAX_NAME_LENGTH = 100;\nconst MAX_PRICE = 1000000;\n\nconst filtersMap = document.querySelector('.map__filters');\nconst mapFeautures = filtersMap.querySelector('.map__features');\nconst mapFilters = filtersMap.querySelectorAll('.map__filter');\nconst housingType = filtersMap.querySelector('#housing-type');\nconst housingPrice = filtersMap.querySelector('#housing-price');\nconst housingRooms = filtersMap.querySelector('#housing-rooms');\nconst housingGuests = filtersMap.querySelector('#housing-guests');\nconst mapCheckboxes = document.querySelectorAll('.map__checkbox');\nconst informForm = document.querySelector('.ad-form');\nconst title = document.querySelector('#title');\nconst address = document.querySelector('#address');\nconst price = document.querySelector('#price');\nconst type = document.querySelector('#type');\nconst timein = document.querySelector('#timein');\nconst timeout = document.querySelector('#timeout');\nconst roomNumber = document.querySelector('#room_number');\nconst capacity = document.querySelector('#capacity');\nconst featureCheckboxes = document.querySelectorAll('.feature__checkbox')\nconst informFieldsets = informForm.querySelectorAll('fieldset');\nconst description = document.querySelector('#description');\nconst resetButton = document.querySelector('.ad-form__reset');\nconst formPhoto = document.querySelector('.ad-form__photo')\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\n\nconst deactivateForm = () => {\n  informForm.classList.add('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = true;\n  }\n\n  filtersMap.classList.add('ad-form--disabled');\n  mapFeautures.disabled = true;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = true;\n  }\n}\n\nconst activateForm = () => {\n  informForm.classList.remove('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = false;\n  }\n}\n\nconst activateFilters = () => {\n  filtersMap.classList.remove('ad-form--disabled');\n  mapFeautures.disabled = false;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = false;\n  }\n}\n\nconst filterAdvertisements = (cb) => {\n  const checkFeatures = () => {\n    let featuresValues = [];\n    for (let i = 0; i < mapCheckboxes.length; i++) {\n      if (mapCheckboxes[i].checked) {\n        featuresValues.push(mapCheckboxes[i].value)\n      }\n    }\n    return featuresValues;\n  }\n\n  housingType.addEventListener('change', () =>\n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingPrice.addEventListener('change', () =>\n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingRooms.addEventListener('change', () =>\n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingGuests.addEventListener('change', () =>\n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n\n  const onFeaturesChecked = (arrayCheckboxes,index) => {\n    arrayCheckboxes[index].addEventListener('click', ()=>{\n      cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n    })\n  }\n\n  for (let i = 0; i < mapCheckboxes.length; i++) {\n    onFeaturesChecked(mapCheckboxes,i);\n  }\n}\n\n// validation\n\naddress.setAttribute('readonly', true);\naddress.value = '35.68170' + ', ' + '139.75388';\n\nlet minPrice = 5000;\n\nconst onTypeChange = function () {\n  minPrice = TYPE_PRICES[`${this.value}`];\n  price.min = minPrice;\n  price.placeholder = TYPE_PRICES[`${this.value}`];\n};\n\ntype.addEventListener('change', onTypeChange);\n\nconst onTimeChange = function (changeOut) {\n  return function () {\n    changeOut.value = this.value;\n  };\n};\n\ntimein.addEventListener('change', onTimeChange(timeout));\ntimeout.addEventListener('change', onTimeChange(timein));\n\ntitle.addEventListener('invalid', () => {\n  if (title.validity.valueMissing) {\n    title.setCustomValidity('Обязательное поле');\n  } else {\n    title.setCustomValidity('');\n  }\n});\n\ntitle.addEventListener('input', () => {\n  const valueLength = title.value.length;\n  if (valueLength < MIN_NAME_LENGTH) {\n    title.setCustomValidity('Ещё ' + (MIN_NAME_LENGTH - valueLength) + ' симв.');\n  } else if (valueLength > MAX_NAME_LENGTH) {\n    title.setCustomValidity('Удалите лишние ' + (valueLength - MAX_NAME_LENGTH) + ' симв.');\n  } else {\n    title.setCustomValidity('');\n  }\n  title.reportValidity();\n});\n\nprice.addEventListener('invalid', () => {\n  if (price.validity.valueMissing) {\n    price.setCustomValidity('Обязательное поле');\n  } else if (price.validity.rangeOverflow) {\n    price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n  } else if (price.validity.rangeUnderflow) {\n    price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n  }\n  else {\n    price.setCustomValidity('');\n  }\n});\n\nprice.addEventListener('input', () => {\n  const value = price.value;\n  if (value < minPrice) {\n    price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n  } else if (value >=  MAX_PRICE) {\n    price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n  } else {\n    price.setCustomValidity('');\n  }\n  price.reportValidity();\n});\n\nconst onRoomNumberChange = function(){\n  if (capacity.value === '0' && roomNumber.value !== '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 100 комнатах')\n  } else if (capacity.value === '1' && roomNumber.value === '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 1, 2 или 3 комнате')\n  } else if (capacity.value === '2' && (roomNumber.value === '1' || roomNumber.value === '100')) {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 2 или 3 комнатах')\n  } else if (capacity.value === '3' && roomNumber.value !== '3') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 3 комнатах')\n  } else {\n    capacity.setCustomValidity('')\n  }\n  capacity.reportValidity();\n};\n\ncapacity.addEventListener('change', onRoomNumberChange);\n\nconst resetForm = () => {\n  housingType.value = 'any';\n  housingPrice.value = 'any';\n  housingRooms.value = 'any';\n  housingGuests.value = 'any';\n  title.value = '';\n  address.value = '35.68170' + ', ' + '139.75388';\n  type.value = 'flat';\n  price.value = '';\n  timein.value = '12:00';\n  timeout.value = '12:00';\n  roomNumber.value = '1';\n  capacity.value = '1';\n  description.value = '';\n  formPhoto.style = '';\n  picPreview.src = 'img/muffin-grey.svg';\n\n  for (let i = 0; i < featureCheckboxes.length; i++) {\n    featureCheckboxes[i].checked = false;\n    mapCheckboxes[i].checked = false;\n  }\n\n  mainPinMarker.setLatLng({\n    lat: 35.68170,\n    lng: 139.75388,\n  });\n\n  renderAdvertisements();\n}\n\n\nconst onResetButtonClick = (evt) => {\n  evt.preventDefault();\n  resetForm();\n}\n\nresetButton.addEventListener('click', onResetButtonClick);\n\n\nconst setFormSubmit = () => {\n  informForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n    const formData = new FormData(informForm);\n    sendData(resetForm, formData)\n  });\n}\n\nexport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  filterAdvertisements,\n  setFormSubmit\n}\n","import {\n  address,\n  activateForm,\n  deactivateForm\n} from './main.js';\n\ndeactivateForm();\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    activateForm();\n  })\n  .setView({\n    lat: 35.681700,\n    lng: 139.753882,\n  }, 9);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors | Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a>',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst START_CORDS = {\n  x: 35.68170,\n  y: 139.75388,\n};\n\nconst mainPinMarker = L.marker({\n  lat: START_CORDS.x,\n  lng: START_CORDS.y,\n}, {\n  draggable: true,\n  icon: mainPinIcon,\n});\n\nmainPinMarker.addTo(map);\n\nconst setAddress = (markerName) => {\n  let pinCords = markerName.getLatLng();\n  address.value = (pinCords.lat).toFixed(5) + ', ' + (pinCords.lng).toFixed(5);\n}\n\nmainPinMarker.on('moveend', (evt) => {\n  setAddress(evt.target);\n});\n\nlet counter = 0;\nlet choosedAdvertisement;\n\nconst chooseAdvertisement = (renderedAdvertisements) => {  \n  choosedAdvertisement = renderedAdvertisements[counter];\n  counter++;\n  if (counter > renderedAdvertisements.length-1) {\n    counter = 0;\n  }\n\n  return choosedAdvertisement;\n}\n\nconst regularIcon = L.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nconst regularMarkers = [];\n\nconst renderAdvertisementsOnMap = (advertisements,popups) => {\n\n  for (let i = 0; i < advertisements.length; i++) {\n    const regularPinMarker = L.marker({\n      lat: advertisements[i].location.lat,\n      lng: advertisements[i].location.lng,\n    }, {\n      icon: regularIcon,\n    });\n\n    regularMarkers.push(regularPinMarker);\n\n    regularPinMarker\n      .addTo(map)\n      .bindPopup(chooseAdvertisement(popups), {\n        keepInView: true,\n      })\n  }\n}\n\nconst removeMarkers = () => {\n  for (let i = 0; i < regularMarkers.length; i++) {\n    map.removeLayer(regularMarkers[i]);\n  }\n}\n\nexport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n}\n","import {\n  createSimilarAdvertisements\n} from './create-similar-advertisements.js';\n\nimport {\n  getData\n} from './api.js';\n\nimport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  filterAdvertisements,\n  setFormSubmit\n} from './form.js';\n\nimport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n} from './map.js';\n\nimport './images-preview.js'\n\nconst RERENDER_DELAY = 500;\nconst SIMILAR_ADVERTISEMENTS_QUANTITY = 10;\n\nconst renderAdvertisements = () => {\n  getData((similarAdvertisements) => {\n    const advrts = similarAdvertisements.slice(0, SIMILAR_ADVERTISEMENTS_QUANTITY);\n    activateFilters();\n    createSimilarAdvertisements(advrts);\n    filterAdvertisements(_.debounce(\n      (valueType, valuePrice, valueRooms, valueGuests, valuesFeature) => createSimilarAdvertisements(advrts, valueType, valuePrice, valueRooms, valueGuests, valuesFeature),\n      RERENDER_DELAY,\n    ));\n  });\n}\n\nrenderAdvertisements();\nsetFormSubmit();\n\nexport {\n  address,\n  removeMarkers,\n  renderAdvertisementsOnMap,\n  deactivateForm,\n  activateForm,\n  mainPinMarker,\n  renderAdvertisements\n}\n","import {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError\n} from './util.js'\n\nconst getData = (onSuccess) => {\n  try {\n    fetch('https://22.javascript.pages.academy/keksobooking/data')\n      .then((response) => response.json())\n      .then((similarAdvertisements) => {\n        onSuccess(similarAdvertisements);\n      })\n      .catch(() => showMessageErrorAlert());\n  } catch (error) {\n    showMessageErrorAlert()\n  }\n\n};\n\nconst sendData = (onSuccess, bodyForm) => {\n  fetch('https://22.javascript.pages.academy/keksobooking', {\n    method: 'POST',\n    body:bodyForm, \n  })\n    .then((response) => {\n      if (response.ok) {\n        showAlertSuccess();\n        onSuccess();\n      } else {\n        showAlertError();\n      }\n    })\n    .catch(() => {\n      showAlertError();\n    })\n};\n\nexport {\n  getData,\n  sendData\n}\n"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack://keksobooking/./source/js/images-preview.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/webpack/runtime/define property getters","webpack://keksobooking/webpack/runtime/hasOwnProperty shorthand","webpack://keksobooking/./source/js/filter-advertisements.js","webpack://keksobooking/./source/js/create-similar-advertisements.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/main.js","webpack://keksobooking/./source/js/api.js"],"names":["FILE_TYPES","avatarChooser","document","querySelector","picPreview","imagesChooser","imagesPreview","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","style","backgroundImage","backgroundSize","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","cardTemplate","createSimilarAdvertisements","similarAdvertisements","valueType","valuePrice","valueRooms","valueGuests","valuesFeature","popups","similarListFragment","createDocumentFragment","filteredAdvertisements","slice","filter","advertisementsElement","offer","type","sortByType","price","sortByPrice","rooms","sortByRooms","guests","sortByGuests","features","length","accumulator","i","j","sortByFeatures","push","filterAdvertisements","forEach","author","advertisement","cloneNode","content","title","address","capacity","textTime","description","photos","avatar","completeTextContentInPopup","popupElement","advertisementElement","classList","add","textContent","flat","bungalow","house","palace","undefined","checkin","checkout","innerHTML","value","nameChild","nameParent","element","createElement","appendChild","createElementInList","index","width","height","createImg","children","removeMarkers","renderAdvertisementsOnMap","alertSuccessTemplate","alertErrorTemplate","main","showMessageErrorAlert","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","body","append","setTimeout","remove","onAlertKeydown","evt","isEscEvent","preventDefault","closeAlert","onWindowsClick","removeEventListener","showAlertError","alertError","TypePrices","filtersMap","mapFeautures","mapFilters","querySelectorAll","housingType","housingPrice","housingRooms","housingGuests","mapCheckboxes","informForm","timein","timeout","roomNumber","featureCheckboxes","informFieldsets","resetButton","formPhoto","deactivateForm","disabled","activateForm","setAttribute","minPrice","this","min","placeholder","onTimeChange","changeOut","validity","valueMissing","setCustomValidity","valueLength","reportValidity","rangeOverflow","rangeUnderflow","resetForm","checked","mainPinMarker","setLatLng","lat","lng","renderAdvertisements","map","L","on","setView","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","marker","draggable","markerName","pinCords","getLatLng","toFixed","setAddress","target","regularIcon","regularMarkers","advertisements","regularPinMarker","location","bindPopup","keepInView","removeLayer","onSuccess","fetch","then","response","json","activateFilters","cb","_","debounce","featuresValues","checkFeatures","catch","error","getData","formData","FormData","method","ok","alertSuccess","showAlertSuccess"],"mappings":"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","file":"main.bunndle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\r\n\r\nconst avatarChooser = document.querySelector('#avatar');\r\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\r\n\r\nconst imagesChooser = document.querySelector('#images');\r\nconst imagesPreview = document.querySelector('.ad-form__photo');\r\n\r\navatarChooser.addEventListener('change', () => {\r\n  const file = avatarChooser.files[0];\r\n  const fileName = file.name.toLowerCase();\r\n\r\n  const matches = FILE_TYPES.some((it) => {\r\n    return fileName.endsWith(it);\r\n  });\r\n\r\n  if (matches) {\r\n    const reader = new FileReader();\r\n\r\n    reader.addEventListener('load', () => {\r\n      picPreview.src = reader.result;\r\n    });\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n});\r\n\r\nimagesChooser.addEventListener('change', () => {\r\n  const file = imagesChooser.files[0];\r\n  const fileName = file.name.toLowerCase();\r\n\r\n  const matches = FILE_TYPES.some((it) => {\r\n    return fileName.endsWith(it);\r\n  });\r\n\r\n  if (matches) {\r\n    const reader = new FileReader();\r\n\r\n    reader.addEventListener('load', () => {\r\n      imagesPreview.style.backgroundImage = `url(${reader.result})`;\r\n      imagesPreview.style.backgroundSize =  '70px 70px';\r\n    });\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// Сортировка по типу жилья\r\nconst sortByType = (advertisementsElement, valueType) => {\r\n  return advertisementsElement.offer.type === valueType || valueType === 'any';\r\n}\r\n\r\n// Сортировка по цене\r\nconst sortByPrice = (advertisementsElement, valuePrice) => {\r\n  const price = advertisementsElement.offer.price;\r\n  switch (valuePrice) {\r\n    case 'any':\r\n      return true;\r\n    case 'middle':\r\n      return price >= 10000 && price < 50000;\r\n    case 'low':\r\n      return price <= 10000;\r\n    case 'high':\r\n      return price >= 50000;\r\n    default:\r\n      return true;\r\n  }\r\n}\r\n\r\n// Сортировка по числу комнат\r\nconst sortByRooms = (advertisementsElement, valueRooms) => {\r\n  const rooms = advertisementsElement.offer.rooms;\r\n  switch (valueRooms) {\r\n    case 'any':\r\n      return true;\r\n    case '1':\r\n      return rooms === 1;\r\n    case '2':\r\n      return rooms === 2;\r\n    case '3':\r\n      return rooms === 3;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\n// Сортировка по количеству гостей\r\nconst sortByGuests = (advertisementsElement, valueGuests) => {\r\n  const guests = advertisementsElement.offer.guests;\r\n  switch (valueGuests) {\r\n    case 'any':\r\n      return true;\r\n    case '0':\r\n      return guests === 0;\r\n    case '1':\r\n      return guests === 1;\r\n    case '2':\r\n      return guests === 2;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\n// Сортировка по доп удобствам\r\nconst sortByFeatures = (advertisementsElement, valuesFeature) => {\r\n  const features = advertisementsElement.offer.features;\r\n\r\n  if (valuesFeature.length) {\r\n    let accumulator = 0;\r\n    for (let i = 0; i < valuesFeature.length; i++) {\r\n      for (let j = 0; j < features.length; j++) {\r\n        if (features[j] === valuesFeature[i]) {\r\n          accumulator++;\r\n        }\r\n      }\r\n    }\r\n    return accumulator === valuesFeature.length\r\n  }\r\n  return true;\r\n}\r\n\r\nconst filterAdvertisements = (    \r\n  similarAdvertisements,\r\n  valueType = 'any',\r\n  valuePrice = 'any',\r\n  valueRooms = 'any',\r\n  valueGuests = 'any',\r\n  valuesFeature = []) => {\r\n  const filteredAdvertisements = [];\r\n  \r\n  similarAdvertisements\r\n    .slice()\r\n    .filter(advertisementsElement => {\r\n      if (\r\n        sortByType(advertisementsElement, valueType) &&\r\n        sortByPrice(advertisementsElement, valuePrice) &&\r\n        sortByRooms(advertisementsElement, valueRooms) &&\r\n        sortByGuests(advertisementsElement, valueGuests) &&\r\n        sortByFeatures(advertisementsElement, valuesFeature)\r\n      ) {\r\n        filteredAdvertisements.push(advertisementsElement);\r\n      }\r\n    });\r\n\r\n  return filteredAdvertisements;\r\n};\r\n\r\nexport {filterAdvertisements}","import {\r\n  renderAdvertisementsOnMap,\r\n  removeMarkers\r\n} from './main.js'\r\n\r\nimport {\r\n  filterAdvertisements\r\n} from './filter-advertisements.js';\r\n\r\nconst SIMILAR_ADVERTISEMENTS_QUANTITY = 10;\r\n\r\nconst cardTemplate = document.querySelector('#card');\r\n\r\nconst createSimilarAdvertisements = (\r\n  similarAdvertisements,\r\n  valueType = 'any',\r\n  valuePrice = 'any',\r\n  valueRooms = 'any',\r\n  valueGuests = 'any',\r\n  valuesFeature = []) => {\r\n  const popups = [];\r\n  const similarListFragment = document.createDocumentFragment();\r\n  \r\n  const filteredAdvertisements = filterAdvertisements(\r\n    similarAdvertisements,\r\n    valueType,\r\n    valuePrice,\r\n    valueRooms,\r\n    valueGuests,\r\n    valuesFeature).slice(0, SIMILAR_ADVERTISEMENTS_QUANTITY)\r\n\r\n  //Заполнение обьявлений по шаблону\r\n  filteredAdvertisements.forEach((\r\n    {\r\n      author,\r\n      offer,\r\n    }) => {\r\n    const advertisement = cardTemplate.cloneNode(true).content;\r\n    const title = advertisement.querySelector('.popup__title');\r\n    const price = advertisement.querySelector('.popup__text--price');\r\n    const address = advertisement.querySelector('.popup__text--address');\r\n    const type = advertisement.querySelector('.popup__type');\r\n    const capacity = advertisement.querySelector('.popup__text--capacity');\r\n    const textTime = advertisement.querySelector('.popup__text--time');\r\n    const features = advertisement.querySelector('.popup__features');\r\n    const description = advertisement.querySelector('.popup__description');\r\n    const photos = advertisement.querySelector('.popup__photos');\r\n    const avatar = advertisement.querySelector('.popup__avatar');\r\n\r\n    const completeTextContentInPopup = (popupElement, advertisementElement) => {\r\n      advertisementElement === '' ? popupElement.classList.add('visually-hidden') : popupElement.textContent = advertisementElement;\r\n    }\r\n\r\n    completeTextContentInPopup(title,offer.title);\r\n    completeTextContentInPopup(price,offer.price);\r\n    completeTextContentInPopup(address,offer.address);\r\n    completeTextContentInPopup(description,offer.description);\r\n\r\n    author.avatar === '' ? avatar.classList.add('visually-hidden') : avatar.src = author.avatar;   \r\n\r\n    const TypeNames = {\r\n      flat: 'Квартира',\r\n      bungalow: 'Бунгало',\r\n      house: 'Дом',\r\n      palace: 'Дворец',\r\n    };\r\n\r\n    offer.type === '' ? type.classList.add('visually-hidden') : type.textContent = TypeNames[offer.type];\r\n\r\n    if (offer.rooms === undefined || offer.guests === undefined) {\r\n      capacity.classList.add('visually-hidden');\r\n    } else {\r\n      capacity.textContent = offer.rooms + ' комнаты для ' + offer.guests + ' гостей'; \r\n    } \r\n   \r\n    textTime.textContent = 'Заезд после ' + offer.checkin + ', выезд до ' + offer.checkout;\r\n\r\n    features.innerHTML = '';\r\n\r\n    const createElementInList = (nameChild, nameParent) => {\r\n      const element = document.createElement('li');\r\n      element.classList.add('popup__feature');\r\n      element.classList.add('popup__feature--' + nameChild);\r\n      element.textContent = nameChild;\r\n      nameParent.appendChild(element);\r\n      return element;\r\n    };\r\n\r\n    if (offer.features.length) {\r\n      offer.features.forEach(value => {\r\n        createElementInList(value, features);\r\n      });      \r\n    } else {\r\n      features.classList.add('visually-hidden');\r\n    }   \r\n\r\n    photos.innerHTML= '';\r\n\r\n    const createImg = (nameParent) => {\r\n      const element = document.createElement('img');\r\n      element.classList.add('popup__photo');\r\n      element.width = '45';\r\n      element.height = '40';\r\n      nameParent.appendChild(element);\r\n      return element;\r\n    }\r\n\r\n    if (offer.photos.length) {\r\n      offer.photos.forEach((value,index) => {\r\n        createImg(photos);\r\n        if (photos.children[index]){\r\n          photos.children[index].src = value;\r\n        }\r\n      });\r\n    } else {      \r\n      photos.classList.add('visually-hidden');\r\n    }  \r\n\r\n    similarListFragment.appendChild(advertisement);\r\n  });\r\n\r\n  for (let i = 0; i < similarListFragment.children.length; i++) {\r\n    popups[i] = similarListFragment.children[i];\r\n  }\r\n\r\n  // Удаление предыдущих меток\r\n  removeMarkers()\r\n\r\n  // Отрисовка\r\n  renderAdvertisementsOnMap(filteredAdvertisements,popups);  \r\n};\r\n\r\nexport {\r\n  createSimilarAdvertisements\r\n}\r\n","const alertSuccessTemplate = document.querySelector('#success');\nconst alertErrorTemplate = document.querySelector('#error');\nconst main = document.querySelector('main');\n\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nconst ALERT_SHOW_TIME = 5000;\n\nconst showMessageErrorAlert = () => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '20px 10px';\n  alertContainer.style.fontSize = '18px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'white';\n  alertContainer.style.width = 200;\n  alertContainer.style.height = 200;\n\n  alertContainer.textContent = 'Произошла ошибка при загрузке данных с сервера :( Обновите страницу!';\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove()\n  }, ALERT_SHOW_TIME);\n}\n\nconst alertContainer = document.createElement('div');\n\nconst onAlertKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeAlert();\n  }\n}\n\nconst onWindowsClick = (evt) => {\n  evt.preventDefault();\n  closeAlert();\n}\n\nconst closeAlert = () => {\n  alertContainer.remove();\n  document.removeEventListener('keydown',onAlertKeydown);\n  alertContainer.removeEventListener('click',onWindowsClick);\n}\n\nconst showAlertSuccess = () => {\n  const alertSuccess = alertSuccessTemplate.cloneNode(true).content;\n  alertContainer.innerHTML = '';\n  alertContainer.append(alertSuccess);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown);\n  alertContainer.addEventListener('click', onWindowsClick);\n}\n\nconst showAlertError = () => {\n  const alertError = alertErrorTemplate.cloneNode(true).content;\n  alertContainer.innerHTML = '';\n  alertContainer.append(alertError);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown(alertContainer));\n  alertContainer.addEventListener('click', onWindowsClick(alertContainer));\n}\n\nexport {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError,\n  isEscEvent\n};\n","import {\n  sendData\n} from './api.js';\n\nimport {\n  mainPinMarker,\n  renderAdvertisements\n} from './main.js';\n\nconst TypePrices = {\n  flat: 1000,\n  bungalow: 0,\n  house: 5000,\n  palace: 10000,\n}\n\nconst MIN_NAME_LENGTH = 30;\nconst MAX_NAME_LENGTH = 100;\nconst MAX_PRICE = 1000000;\n\nconst filtersMap = document.querySelector('.map__filters');\nconst mapFeautures = filtersMap.querySelector('.map__features');\nconst mapFilters = filtersMap.querySelectorAll('.map__filter');\nconst housingType = filtersMap.querySelector('#housing-type');\nconst housingPrice = filtersMap.querySelector('#housing-price');\nconst housingRooms = filtersMap.querySelector('#housing-rooms');\nconst housingGuests = filtersMap.querySelector('#housing-guests');\nconst mapCheckboxes = document.querySelectorAll('.map__checkbox');\nconst informForm = document.querySelector('.ad-form');\nconst title = document.querySelector('#title');\nconst address = document.querySelector('#address');\nconst price = document.querySelector('#price');\nconst type = document.querySelector('#type');\nconst timein = document.querySelector('#timein');\nconst timeout = document.querySelector('#timeout');\nconst roomNumber = document.querySelector('#room_number');\nconst capacity = document.querySelector('#capacity');\nconst featureCheckboxes = document.querySelectorAll('.feature__checkbox')\nconst informFieldsets = informForm.querySelectorAll('fieldset');\nconst description = document.querySelector('#description');\nconst resetButton = document.querySelector('.ad-form__reset');\nconst formPhoto = document.querySelector('.ad-form__photo')\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\n\nconst deactivateForm = () => {\n  informForm.classList.add('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = true;\n  }\n\n  filtersMap.classList.add('ad-form--disabled');\n  mapFeautures.disabled = true;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = true;\n  }\n}\n\nconst activateForm = () => {\n  informForm.classList.remove('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = false;\n  }\n}\n\nconst activateFilters = () => {\n  filtersMap.classList.remove('ad-form--disabled');\n  mapFeautures.disabled = false;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = false;\n  }\n}\n\n// Функция передает в коллбэк все values фильтров для карты\nconst getFiltersValues= (cb) => {\n  const checkFeatures = () => {\n    let featuresValues = [];\n    for (let i = 0; i < mapCheckboxes.length; i++) {\n      if (mapCheckboxes[i].checked) {\n        featuresValues.push(mapCheckboxes[i].value)\n      }\n    }\n    return featuresValues;\n  }\n\n  filtersMap.addEventListener('change', ()=> {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  })\n}\n\n// validation\n\naddress.setAttribute('readonly', true);\naddress.value = '35.68170' + ', ' + '139.75388';\n\nlet minPrice = 5000;\n\nconst onTypeChange = function () {\n  minPrice = TypePrices[this.value];\n  price.min = minPrice;\n  price.placeholder = TypePrices[this.value];\n};\n\ntype.addEventListener('change', onTypeChange);\n\nconst onTimeChange = function (changeOut) {\n  return function () {\n    changeOut.value = this.value;\n  };\n};\n\ntimein.addEventListener('change', onTimeChange(timeout));\ntimeout.addEventListener('change', onTimeChange(timein));\n\ntitle.addEventListener('invalid', () => {\n  if (title.validity.valueMissing) {\n    title.setCustomValidity('Обязательное поле');\n  } else {\n    title.setCustomValidity('');\n  }\n});\n\ntitle.addEventListener('input', () => {\n  const valueLength = title.value.length;\n  if (valueLength < MIN_NAME_LENGTH) {\n    title.setCustomValidity('Ещё ' + (MIN_NAME_LENGTH - valueLength) + ' симв.');\n  } else if (valueLength > MAX_NAME_LENGTH) {\n    title.setCustomValidity('Удалите лишние ' + (valueLength - MAX_NAME_LENGTH) + ' симв.');\n  } else {\n    title.setCustomValidity('');\n  }\n  title.reportValidity();\n});\n\nprice.addEventListener('invalid', () => {\n  switch (true) {\n    case price.validity.valueMissing:\n      price.setCustomValidity('Обязательное поле');\n      break;\n    case price.validity.rangeOverflow:\n      price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n      break;\n    case price.validity.rangeUnderflow:\n      price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n      break;\n    default:\n      price.setCustomValidity('');\n      break;\n  }\n});\n\nprice.addEventListener('input', () => {\n  const value = price.value;\n  if (value < minPrice) {\n    price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n  } else if (value >=  MAX_PRICE) {\n    price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n  } else {\n    price.setCustomValidity('');\n  }\n  price.reportValidity();\n});\n\nconst onRoomNumberChange = function(){\n  if (capacity.value === '0' && roomNumber.value !== '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 100 комнатах')\n  } else if (capacity.value === '1' && roomNumber.value === '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 1, 2 или 3 комнате')\n  } else if (capacity.value === '2' && (roomNumber.value === '1' || roomNumber.value === '100')) {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 2 или 3 комнатах')\n  } else if (capacity.value === '3' && roomNumber.value !== '3') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 3 комнатах')\n  } else {\n    capacity.setCustomValidity('')\n  }\n  capacity.reportValidity();\n};\n\ncapacity.addEventListener('change', onRoomNumberChange);\n\nconst resetForm = () => {\n  housingType.value = 'any';\n  housingPrice.value = 'any';\n  housingRooms.value = 'any';\n  housingGuests.value = 'any';\n  title.value = '';\n  address.value = '35.68170' + ', ' + '139.75388';\n  type.value = 'flat';\n  price.value = '';\n  timein.value = '12:00';\n  timeout.value = '12:00';\n  roomNumber.value = '1';\n  capacity.value = '1';\n  description.value = '';\n  formPhoto.style = '';\n  picPreview.src = 'img/muffin-grey.svg';\n\n  for (let i = 0; i < featureCheckboxes.length; i++) {\n    featureCheckboxes[i].checked = false;\n    mapCheckboxes[i].checked = false;\n  }\n\n  mainPinMarker.setLatLng({\n    lat: 35.68170,\n    lng: 139.75388,\n  });\n\n  renderAdvertisements();\n}\n\nconst onResetButtonClick = (evt) => {\n  evt.preventDefault();\n  resetForm();\n};\n\nresetButton.addEventListener('click', onResetButtonClick);\n\nconst setFormSubmit = () => {\n  informForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();    \n    const formData = new FormData(informForm);\n    sendData(resetForm, formData)\n  });\n}\n\nexport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  getFiltersValues,\n  setFormSubmit\n}\n","import {\n  address,\n  activateForm,\n  deactivateForm\n} from './main.js';\n\ndeactivateForm();\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    activateForm();\n  })\n  .setView({\n    lat: 35.681700,\n    lng: 139.753882,\n  }, 9);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors | Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a>',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst START_CORDS = {\n  x: 35.68170,\n  y: 139.75388,\n};\n\nconst mainPinMarker = L.marker({\n  lat: START_CORDS.x,\n  lng: START_CORDS.y,\n}, {\n  draggable: true,\n  icon: mainPinIcon,\n});\n\nmainPinMarker.addTo(map);\n\nconst setAddress = (markerName) => {\n  let pinCords = markerName.getLatLng();\n  address.value = (pinCords.lat).toFixed(5) + ', ' + (pinCords.lng).toFixed(5);\n}\n\nmainPinMarker.on('moveend', (evt) => {\n  setAddress(evt.target);\n});\n\nconst regularIcon = L.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\n\n// Отрисовка обьявлений на карту с добавлением балунов\nconst regularMarkers = [];\nconst renderAdvertisementsOnMap = (advertisements, popups) => {\n\n  advertisements.forEach((element,index)=> {\n    const regularPinMarker = L.marker({\n      lat: element.location.lat,\n      lng: element.location.lng,\n    }, {\n      icon: regularIcon,\n    });\n\n    regularMarkers.push(regularPinMarker);\n\n    regularPinMarker\n      .addTo(map)\n      .bindPopup(popups[index], {\n        keepInView: true,\n      })\n  })\n}\n\nconst removeMarkers = () => {\n  for (let i = 0; i < regularMarkers.length; i++) {\n    map.removeLayer(regularMarkers[i]);\n  }\n}\n\nexport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n}\n","import {\n  createSimilarAdvertisements\n} from './create-similar-advertisements.js';\n\nimport {\n  getData\n} from './api.js';\n\nimport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  getFiltersValues,\n  setFormSubmit\n} from './form.js';\n\nimport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n} from './map.js';\n\nimport './images-preview.js'\n\nconst RERENDER_DELAY = 500;\n\nconst renderAdvertisements = () => {\n  getData((similarAdvertisements) => {\n    activateFilters();\n    createSimilarAdvertisements(similarAdvertisements);\n    getFiltersValues(_.debounce(\n      (valueType, valuePrice, valueRooms, valueGuests, valuesFeature) => \n        createSimilarAdvertisements(similarAdvertisements, valueType, valuePrice, valueRooms, valueGuests, valuesFeature),\n      RERENDER_DELAY,\n    ));\n  });\n}\n\nrenderAdvertisements();\nsetFormSubmit();\n\nexport {\n  address,\n  removeMarkers,\n  renderAdvertisementsOnMap,\n  deactivateForm,\n  activateForm,\n  mainPinMarker,\n  renderAdvertisements\n}\n","import {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError\n} from './util.js'\n\nconst getData = (onSuccess) => {\n  try {\n    fetch('https://22.javascript.pages.academy/keksobooking/data')\n      .then((response) => response.json())\n      .then((similarAdvertisements) => {\n        onSuccess(similarAdvertisements);\n      })\n      .catch(() => showMessageErrorAlert());\n  } catch (error) {\n    showMessageErrorAlert()\n  }\n\n};\n\nconst sendData = (onSuccess, bodyForm) => {\n  fetch('https://22.javascript.pages.academy/keksobooking', {\n    method: 'POST',\n    body:bodyForm, \n  })\n    .then((response) => {\n      if (response.ok) {\n        showAlertSuccess();\n        onSuccess();\n      } else {\n        showAlertError();\n      }\n    })\n    .catch(() => {\n      showAlertError();\n    })\n};\n\nexport {\n  getData,\n  sendData\n}\n"],"sourceRoot":""}
>>>>>>> 267539273edf74961a13815d61ffdf998c046b13
