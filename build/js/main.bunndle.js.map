{"version":3,"sources":["webpack://keksobooking/./source/js/images-preview.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/webpack/runtime/define property getters","webpack://keksobooking/webpack/runtime/hasOwnProperty shorthand","webpack://keksobooking/./source/js/create-similar-advertisements.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/main.js","webpack://keksobooking/./source/js/api.js"],"names":["FILE_TYPES","avatarChooser","document","querySelector","picPreview","imagesChooser","imagesPreview","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","style","backgroundImage","backgroundSize","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","cardTemplate","createSimilarAdvertisements","similarAdvertisements","valueType","valuePrice","valueRooms","valueGuests","valuesFeature","filteredAdvertisements","popups","similarListFragment","createDocumentFragment","slice","filter","advertisementsElement","value","offer","type","sortByType","price","sortByPrice","rooms","sortByRooms","guests","sortByGuests","features","length","accumulator","i","j","sortByFeatures","push","forEach","author","advertisement","cloneNode","content","title","address","capacity","textTime","description","photos","avatar","completeTextContentInPopup","popupElement","advertisementElement","classList","add","textContent","TYPE_NAMES","keys","undefined","checkin","checkout","firstChild","removeChild","nameChild","nameParent","element","createElement","appendChild","createElementInList","index","width","height","createImg","children","removeMarkers","renderAdvertisementsOnMap","alertSuccessTemplate","alertErrorTemplate","main","showMessageErrorAlert","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","body","append","setTimeout","remove","onAlertKeydown","container","evt","isEscEvent","preventDefault","closeAlert","onWindowsClick","removeEventListener","showAlertError","alertEror","TYPE_PRICES","filtersMap","mapFeautures","mapFilters","querySelectorAll","housingType","housingPrice","housingRooms","housingGuests","mapCheckboxes","informForm","timein","timeout","roomNumber","featureCheckboxes","informFieldsets","resetButton","formPhoto","deactivateForm","disabled","activateForm","setAttribute","minPrice","this","min","placeholder","onTimeChange","changeOut","validity","valueMissing","setCustomValidity","valueLength","reportValidity","rangeOverflow","rangeUnderflow","resetForm","checked","mainPinMarker","setLatLng","lat","lng","renderAdvertisements","map","L","on","setView","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","marker","draggable","markerName","pinCords","getLatLng","toFixed","setAddress","target","choosedAdvertisement","counter","regularIcon","regularMarkers","advertisements","regularPinMarker","location","bindPopup","renderedAdvertisements","keepInView","removeLayer","onSuccess","fetch","then","response","json","advrts","activateFilters","cb","checkFeatures","featuresValues","filterAdvertisements","_","debounce","catch","error","getData","formData","FormData","method","ok","alertSuccess","showAlertSuccess"],"mappings":"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","file":"main.bunndle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\r\n\r\nconst avatarChooser = document.querySelector('#avatar');\r\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\r\n\r\nconst imagesChooser = document.querySelector('#images');\r\nconst imagesPreview = document.querySelector('.ad-form__photo');\r\n\r\navatarChooser.addEventListener('change', () => {\r\n  const file = avatarChooser.files[0];\r\n  const fileName = file.name.toLowerCase();\r\n\r\n  const matches = FILE_TYPES.some((it) => {\r\n    return fileName.endsWith(it);\r\n  });\r\n\r\n  if (matches) {\r\n    const reader = new FileReader();\r\n\r\n    reader.addEventListener('load', () => {\r\n      picPreview.src = reader.result;\r\n    });\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n});\r\n\r\nimagesChooser.addEventListener('change', () => {\r\n  const file = imagesChooser.files[0];\r\n  const fileName = file.name.toLowerCase();\r\n\r\n  const matches = FILE_TYPES.some((it) => {\r\n    return fileName.endsWith(it);\r\n  });\r\n\r\n  if (matches) {\r\n    const reader = new FileReader();\r\n\r\n    reader.addEventListener('load', () => {\r\n      imagesPreview.style.backgroundImage = `url(${reader.result})`;\r\n      imagesPreview.style.backgroundSize =  '70px 70px';\r\n    });\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import {renderAdvertisementsOnMap,removeMarkers} from './main.js'\r\n\r\nconst cardTemplate = document.querySelector('#card');\r\n\r\n// Сортировка по типу жилья\r\nconst sortByType = (advertisementsElement, value) => {\r\n  return advertisementsElement.offer.type === value || value === 'any'\r\n}\r\n\r\n// Сортировка по цене\r\nconst sortByPrice = (advertisementsElement, value) => {\r\n  const price = advertisementsElement.offer.price;\r\n  switch (value) {\r\n    case 'any':\r\n      return true;\r\n    case 'middle':\r\n      return price >= 10000 && price < 50000;\r\n    case 'low':\r\n      return price <= 10000;\r\n    case 'high':\r\n      return price >= 50000;\r\n    default:\r\n      return true;\r\n  }\r\n}\r\n\r\n// Сортировка по числу комнат\r\nconst sortByRooms = (advertisementsElement, value) => {\r\n  const rooms = advertisementsElement.offer.rooms;\r\n  switch (value) {\r\n    case 'any':\r\n      return true;\r\n    case '1':\r\n      return rooms === 1;\r\n    case '2':\r\n      return rooms === 2;\r\n    case '3':\r\n      return rooms === 3;\r\n    default:\r\n      return true;\r\n  }\r\n}\r\n\r\n// Сортировка по количеству гостей\r\nconst sortByGuests = (advertisementsElement, value) => {\r\n  const guests = advertisementsElement.offer.guests;\r\n  switch (value) {\r\n    case 'any':\r\n      return true;\r\n    case '1':\r\n      return guests === 1;\r\n    case '2':\r\n      return guests === 2;\r\n    case '0':\r\n      return guests === 0;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\n// Сортировка по доп удобствам\r\nconst sortByFeatures = (advertisementsElement, valuesFeature) => {\r\n  const features = advertisementsElement.offer.features;\r\n\r\n  if (valuesFeature.length === 0) {\r\n    return true;\r\n  } else {\r\n    let accumulator = 0;\r\n    for (let i = 0; i < valuesFeature.length; i++) {\r\n      for (let j = 0; j < features.length; j++) {        \r\n        if (features[j]===valuesFeature[i]) {\r\n          accumulator++;\r\n        }      \r\n      } \r\n    }    \r\n    return accumulator === valuesFeature.length\r\n  }\r\n}\r\n\r\nconst createSimilarAdvertisements = (similarAdvertisements,valueType='any',valuePrice='any',valueRooms='any',valueGuests='any',valuesFeature=[]) => {\r\n  const filteredAdvertisements = [];  \r\n  const popups = [];\r\n  const similarListFragment = document.createDocumentFragment();\r\n  similarAdvertisements\r\n    .slice()\r\n    .filter((advertisementsElement) => {\r\n      if (sortByType(advertisementsElement, valueType) \r\n      &&  sortByPrice(advertisementsElement, valuePrice) \r\n      && sortByRooms(advertisementsElement, valueRooms)\r\n      && sortByGuests(advertisementsElement, valueGuests)\r\n      && sortByFeatures(advertisementsElement, valuesFeature)) {\r\n        filteredAdvertisements.push(advertisementsElement);\r\n      }\r\n    })\r\n\r\n  filteredAdvertisements.forEach(({\r\n    author,\r\n    offer,\r\n  }) => {\r\n    const advertisement = cardTemplate.cloneNode(true).content;\r\n    const title = advertisement.querySelector('.popup__title');\r\n    const price = advertisement.querySelector('.popup__text--price');\r\n    const address = advertisement.querySelector('.popup__text--address');\r\n    const type = advertisement.querySelector('.popup__type');\r\n    const capacity = advertisement.querySelector('.popup__text--capacity');\r\n    const textTime = advertisement.querySelector('.popup__text--time');\r\n    const features = advertisement.querySelector('.popup__features');\r\n    const description = advertisement.querySelector('.popup__description');\r\n    const photos = advertisement.querySelector('.popup__photos');\r\n    const avatar = advertisement.querySelector('.popup__avatar');\r\n\r\n    const completeTextContentInPopup = (popupElement, advertisementElement) => {\r\n      advertisementElement === '' ? popupElement.classList.add('visually-hidden') : popupElement.textContent = advertisementElement;\r\n    }\r\n\r\n    completeTextContentInPopup(title,offer.title);\r\n    completeTextContentInPopup(price,offer.price);\r\n    completeTextContentInPopup(address,offer.address);\r\n    completeTextContentInPopup(description,offer.description);\r\n\r\n    author.avatar === '' ? avatar.classList.add('visually-hidden') : avatar.src = author.avatar;   \r\n\r\n    const TYPE_NAMES = {\r\n      'flat': 'Квартира',\r\n      'bungalow': 'Бунгало',\r\n      'house': 'Дом',\r\n      'palace': 'Дворец',\r\n    };\r\n\r\n    const swapTypeName = () => {\r\n      Object.keys(TYPE_NAMES).forEach((value) => {\r\n        if (offer.type === value) {\r\n          type.textContent = TYPE_NAMES[`${value}`];\r\n        }\r\n      });\r\n    }\r\n\r\n    offer.type === '' ? avatar.classList.add('visually-hidden') : swapTypeName();\r\n\r\n    if (offer.rooms === undefined || offer.guests === undefined) {\r\n      capacity.classList.add('visually-hidden');\r\n    } else {\r\n      capacity.textContent = offer.rooms + ' комнаты для ' + offer.guests + ' гостей';\r\n    }\r\n   \r\n    textTime.textContent = 'Заезд после ' + offer.checkin + ', выезд до ' + offer.checkout;\r\n\r\n    while (features.firstChild) {\r\n      features.removeChild(features.firstChild);\r\n    }\r\n\r\n    const createElementInList = (nameChild, nameParent) => {\r\n      const element = document.createElement('li');\r\n      element.classList.add('.popup__feature');\r\n      element.classList.add('.popup__feature--' + nameChild);\r\n      element.textContent = nameChild;\r\n      nameParent.appendChild(element);\r\n      return element;\r\n    };\r\n\r\n    if (offer.features.length === 0) {\r\n      features.classList.add('visually-hidden');\r\n    } else {\r\n      offer.features.forEach(value => {\r\n        createElementInList(value, features);\r\n      });    \r\n    }\r\n\r\n    while (photos.firstChild) {\r\n      photos.removeChild(photos.firstChild);\r\n    }\r\n\r\n    const createImg = (nameParent) => {\r\n      const element = document.createElement('img');\r\n      element.classList.add('.popup__photo');\r\n      element.width = '45';\r\n      element.height = '40';\r\n      nameParent.appendChild(element);\r\n      return element;\r\n    }\r\n\r\n    if (offer.photos.length === 0) {\r\n      photos.classList.add('visually-hidden');\r\n    } else {\r\n      offer.photos.forEach((value,index) => {\r\n        createImg(photos);\r\n        if (photos.children[index]){\r\n          photos.children[index].src = value;\r\n        }\r\n      });     \r\n    }   \r\n    \r\n    similarListFragment.appendChild(advertisement);\r\n  });\r\n\r\n  for (let i = 0; i < similarListFragment.children.length; i++) {\r\n    popups[i] = similarListFragment.children[i];\r\n  }\r\n\r\n  removeMarkers()\r\n  renderAdvertisementsOnMap(filteredAdvertisements,popups);\r\n};\r\n\r\nexport {\r\n  createSimilarAdvertisements\r\n}\r\n","const alertSuccessTemplate = document.querySelector('#success');\nconst alertErrorTemplate = document.querySelector('#error');\nconst main = document.querySelector('main');\n\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nconst ALERT_SHOW_TIME = 5000;\n\nconst showMessageErrorAlert = () => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '20px 10px';\n  alertContainer.style.fontSize = '18px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'white';\n  alertContainer.style.width = 200;\n  alertContainer.style.height = 200;\n\n  alertContainer.textContent = 'Произошла ошибка при загрузке данных с сервера :( Обновите страницу!';\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove()\n  }, ALERT_SHOW_TIME);\n}\n\nconst onAlertKeydown = (container) => {\n  return (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      closeAlert(container);\n    }\n  }\n}\n\nconst onWindowsClick = (container) => {\n  return (evt) => {\n    evt.preventDefault();\n    closeAlert(container);\n  }\n}\n\nconst closeAlert = (container) => {\n  container.remove();\n  document.removeEventListener('keypress', onAlertKeydown(container))\n  container.removeEventListener('click', onWindowsClick(container));\n}\n\nconst showAlertSuccess = () => {\n  const alertSuccess = alertSuccessTemplate.cloneNode(true).content;\n  const alertContainer = document.createElement('div');\n  alertContainer.append(alertSuccess);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown(alertContainer));\n  alertContainer.addEventListener('click', onWindowsClick(alertContainer));\n}\n\nconst showAlertError = () => {\n  const alertEror = alertErrorTemplate.cloneNode(true).content;\n  const alertContainer = document.createElement('div');\n  alertContainer.append(alertEror);\n  main.append(alertContainer);\n\n  document.addEventListener('keydown', onAlertKeydown(alertContainer));\n  alertContainer.addEventListener('click', onWindowsClick(alertContainer));\n}\n\nexport {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError,\n  isEscEvent\n};\n","import {\n  sendData\n} from './api.js';\n\nimport {\n  mainPinMarker,\n  renderAdvertisements\n} from './main.js';\n\nconst TYPE_PRICES = {\n  'flat': 1000,\n  'bungalow': 0,\n  'house': 5000,\n  'palace': 10000,\n}\n\nconst MIN_NAME_LENGTH = 30;\nconst MAX_NAME_LENGTH = 100;\nconst MAX_PRICE = 1000000;\n\nconst filtersMap = document.querySelector('.map__filters');\nconst mapFeautures = filtersMap.querySelector('.map__features');\nconst mapFilters = filtersMap.querySelectorAll('.map__filter');\nconst housingType = filtersMap.querySelector('#housing-type');\nconst housingPrice = filtersMap.querySelector('#housing-price');\nconst housingRooms = filtersMap.querySelector('#housing-rooms');\nconst housingGuests = filtersMap.querySelector('#housing-guests');\nconst mapCheckboxes = document.querySelectorAll('.map__checkbox');\nconst informForm = document.querySelector('.ad-form');\nconst title = document.querySelector('#title');\nconst address = document.querySelector('#address');\nconst price = document.querySelector('#price');\nconst type = document.querySelector('#type');\nconst timein = document.querySelector('#timein');\nconst timeout = document.querySelector('#timeout');\nconst roomNumber = document.querySelector('#room_number');\nconst capacity = document.querySelector('#capacity');\nconst featureCheckboxes = document.querySelectorAll('.feature__checkbox')\nconst informFieldsets = informForm.querySelectorAll('fieldset');\nconst description = document.querySelector('#description');\nconst resetButton = document.querySelector('.ad-form__reset');\nconst formPhoto = document.querySelector('.ad-form__photo')\nconst picPreview = document.querySelector('.ad-form-header__pic-preview');\n\nconst deactivateForm = () => {\n  informForm.classList.add('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = true;\n  }\n\n  filtersMap.classList.add('ad-form--disabled');\n  mapFeautures.disabled = true;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = true;\n  }\n}\n\nconst activateForm = () => {\n  informForm.classList.remove('ad-form--disabled');\n  for (let i = 0; i < informFieldsets.length; i++) {\n    informFieldsets[i].disabled = false;\n  }\n}\n\nconst activateFilters = () => {\n  filtersMap.classList.remove('ad-form--disabled');\n  mapFeautures.disabled = false;\n  for (let i = 0; i < mapFilters.length; i++) {\n    mapFilters[i].disabled = false;\n  }\n}\n\nconst filterAdvertisements = (cb) => {\n  const checkFeatures = () => {\n    let featuresValues = [];\n    for (let i = 0; i < mapCheckboxes.length; i++) {\n      if (mapCheckboxes[i].checked) {\n        featuresValues.push(mapCheckboxes[i].value)\n      }\n    }\n    return featuresValues;\n  }\n\n  housingType.addEventListener('change', () => \n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingPrice.addEventListener('change', () => \n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingRooms.addEventListener('change', () => \n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  });\n  housingGuests.addEventListener('change', () => \n  {\n    cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());\n  }); \n\n  const onFeaturesChecked = (arrayCheckboxes,index) => {\n    arrayCheckboxes[index].addEventListener('click', ()=>{\n      cb(housingType.value,housingPrice.value,housingRooms.value,housingGuests.value,checkFeatures());      \n    })\n  }\n\n  for (let i = 0; i < mapCheckboxes.length; i++) {\n    onFeaturesChecked(mapCheckboxes,i);\n  }\n}\n\n// validation\n\naddress.setAttribute('readonly', true);\naddress.value = '35.68170' + ', ' + '139.75388';\n\nlet minPrice = 5000;\n\nconst onTypeChange = function () {\n  minPrice = TYPE_PRICES[`${this.value}`];\n  price.min = minPrice;\n  price.placeholder = TYPE_PRICES[`${this.value}`];\n};\n\ntype.addEventListener('change', onTypeChange);\n\nconst onTimeChange = function (changeOut) {\n  return function () {\n    changeOut.value = this.value;\n  };\n};\n\ntimein.addEventListener('change', onTimeChange(timeout));\ntimeout.addEventListener('change', onTimeChange(timein));\n\ntitle.addEventListener('invalid', () => {\n  if (title.validity.valueMissing) {\n    title.setCustomValidity('Обязательное поле');\n  } else {\n    title.setCustomValidity('');\n  }\n});\n\ntitle.addEventListener('input', () => {\n  const valueLength = title.value.length;\n  if (valueLength < MIN_NAME_LENGTH) {\n    title.setCustomValidity('Ещё ' + (MIN_NAME_LENGTH - valueLength) + ' симв.');\n  } else if (valueLength > MAX_NAME_LENGTH) {\n    title.setCustomValidity('Удалите лишние ' + (valueLength - MAX_NAME_LENGTH) + ' симв.');\n  } else {\n    title.setCustomValidity('');\n  }\n  title.reportValidity();\n});\n\nprice.addEventListener('invalid', () => {\n  if (price.validity.valueMissing) {\n    price.setCustomValidity('Обязательное поле');\n  } else if (price.validity.rangeOverflow) {\n    price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n  } else if (price.validity.rangeUnderflow) {\n    price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n  }\n  else {\n    price.setCustomValidity('');\n  }\n});\n\nprice.addEventListener('input', () => {\n  const value = price.value;\n  if (value < minPrice) {\n    price.setCustomValidity('Цена не может быть ниже ' + minPrice);\n  } else if (value >=  MAX_PRICE) {\n    price.setCustomValidity('Цена не может превышать ' + MAX_PRICE);\n  } else {\n    price.setCustomValidity('');\n  }\n  price.reportValidity();\n});\n\nconst onRoomNumberChange = function(){\n  if (capacity.value === '0' && roomNumber.value !== '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 100 комнатах')\n  } else if (capacity.value === '1' && roomNumber.value === '100') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 1, 2 или 3 комнате')\n  } else if (capacity.value === '2' && (roomNumber.value === '1' || roomNumber.value === '100')) {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 2 или 3 комнатах')\n  } else if (capacity.value === '3' && roomNumber.value !== '3') {\n    capacity.setCustomValidity('Выбранное количество гостей может расположиться лишь в 3 комнатах')\n  } else {\n    capacity.setCustomValidity('')\n  }\n  capacity.reportValidity();\n};\n\ncapacity.addEventListener('change', onRoomNumberChange);\n\nconst resetForm = () => {\n  housingType.value = 'any';\n  housingPrice.value = 'any';\n  housingRooms.value = 'any';\n  housingGuests.value = 'any';\n  title.value = '';\n  address.value = '35.68170' + ', ' + '139.75388';\n  type.value = 'flat';\n  price.value = '';\n  timein.value = '12:00';\n  timeout.value = '12:00';\n  roomNumber.value = '1';\n  capacity.value = '1';\n  description.value = '';\n  formPhoto.style = '';\n  picPreview.src = 'img/muffin-grey.svg';\n\n  for (let i = 0; i < featureCheckboxes.length; i++) {\n    featureCheckboxes[i].checked = false;\n    mapCheckboxes[i].checked = false;\n  }\n\n  mainPinMarker.setLatLng({\n    lat: 35.68170,\n    lng: 139.75388,\n  });\n\n  renderAdvertisements();\n}\n\nconst onResetButtonClick = (evt) => {\n  evt.preventDefault();\n  resetForm();\n};\n\nresetButton.addEventListener('click', onResetButtonClick);\n\nconst setFormSubmit = () => {\n  informForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();    \n    const formData = new FormData(informForm);\n    sendData(resetForm, formData)\n  });\n}\n\nexport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  filterAdvertisements,\n  setFormSubmit\n}\n","import {\n  address,\n  activateForm,\n  deactivateForm\n} from './main.js';\n\ndeactivateForm();\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    activateForm();\n  })\n  .setView({\n    lat: 35.681700,\n    lng: 139.753882,\n  }, 9);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors | Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a>',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst START_CORDS = {\n  x: 35.68170,\n  y: 139.75388,\n};\n\nconst mainPinMarker = L.marker({\n  lat: START_CORDS.x,\n  lng: START_CORDS.y,\n}, {\n  draggable: true,\n  icon: mainPinIcon,\n});\n\nmainPinMarker.addTo(map);\n\nconst setAddress = (markerName) => {\n  let pinCords = markerName.getLatLng();\n  address.value = (pinCords.lat).toFixed(5) + ', ' + (pinCords.lng).toFixed(5);\n}\n\nmainPinMarker.on('moveend', (evt) => {\n  setAddress(evt.target);\n});\n\nlet counter = 0;\nlet choosedAdvertisement;\n\nconst chooseAdvertisement = (renderedAdvertisements) => {  \n  choosedAdvertisement = renderedAdvertisements[counter];\n  counter++;\n  if (counter > renderedAdvertisements.length-1) {\n    counter = 0;\n  }\n\n  return choosedAdvertisement;\n}\n\nconst regularIcon = L.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nconst regularMarkers = [];\n\nconst renderAdvertisementsOnMap = (advertisements,popups) => {\n\n  for (let i = 0; i < advertisements.length; i++) {\n    const regularPinMarker = L.marker({\n      lat: advertisements[i].location.lat,\n      lng: advertisements[i].location.lng,\n    }, {\n      icon: regularIcon,\n    });\n\n    regularMarkers.push(regularPinMarker);\n\n    regularPinMarker\n      .addTo(map)\n      .bindPopup(chooseAdvertisement(popups), {\n        keepInView: true,\n      })\n  }\n}\n\nconst removeMarkers = () => {\n  for (let i = 0; i < regularMarkers.length; i++) {\n    map.removeLayer(regularMarkers[i]);\n  }\n}\n\nexport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n}\n","import {\n  createSimilarAdvertisements\n} from './create-similar-advertisements.js';\n\nimport {\n  getData\n} from './api.js';\n\nimport {\n  address,\n  deactivateForm,\n  activateForm,\n  activateFilters,\n  filterAdvertisements,\n  setFormSubmit\n} from './form.js';\n\nimport {\n  renderAdvertisementsOnMap,\n  removeMarkers,\n  mainPinMarker\n} from './map.js';\n\nimport './images-preview.js'\n\nconst RERENDER_DELAY = 500;\nconst SIMILAR_ADVERTISEMENTS_QUANTITY = 10;\n\nconst renderAdvertisements = () => {\n  getData((similarAdvertisements) => {\n    const advrts = similarAdvertisements.slice(0, SIMILAR_ADVERTISEMENTS_QUANTITY);\n    activateFilters();\n    createSimilarAdvertisements(advrts);\n    filterAdvertisements(_.debounce(\n      (valueType, valuePrice, valueRooms, valueGuests, valuesFeature) => createSimilarAdvertisements(advrts, valueType, valuePrice, valueRooms, valueGuests, valuesFeature),\n      RERENDER_DELAY,\n    ));\n  });\n}\n\nrenderAdvertisements();\nsetFormSubmit();\n\nexport {\n  address,\n  removeMarkers,\n  renderAdvertisementsOnMap,\n  deactivateForm,\n  activateForm,\n  mainPinMarker,\n  renderAdvertisements\n}\n","import {\n  showMessageErrorAlert,\n  showAlertSuccess,\n  showAlertError\n} from './util.js'\n\nconst getData = (onSuccess) => {\n  try {\n    fetch('https://22.javascript.pages.academy/keksobooking/data')\n      .then((response) => response.json())\n      .then((similarAdvertisements) => {\n        onSuccess(similarAdvertisements);\n      })\n      .catch(() => showMessageErrorAlert());\n  } catch (error) {\n    showMessageErrorAlert()\n  }\n\n};\n\nconst sendData = (onSuccess, bodyForm) => {\n  fetch('https://22.javascript.pages.academy/keksobooking', {\n    method: 'POST',\n    body:bodyForm, \n  })\n    .then((response) => {\n      if (response.ok) {\n        showAlertSuccess();\n        onSuccess();\n      } else {\n        showAlertError();\n      }\n    })\n    .catch(() => {\n      showAlertError();\n    })\n};\n\nexport {\n  getData,\n  sendData\n}\n"],"sourceRoot":""}